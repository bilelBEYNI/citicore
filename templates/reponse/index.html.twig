{% extends '/front/index.html.twig' %}

{% block title %}R√©ponses{% endblock %}

{% block body %}
    {% include 'front/navbar.html.twig' %}
    <div class="container mt-5">
        <h2 class="mb-4 text-center">üìã Mes R√©ponses</h2>

  
    </a>
        <div class="row mb-3">
            <div class="col-md-4">
                <input type="text" id="filterInput" class="form-control" placeholder="üîç Filtrer par sujet...">
            </div>
            <table class="table table-hover" id="reponsesTable">
                <thead class="table-dark">
                    <tr>
                        <th>ID R√©ponse</th>
                        <th>Contenu</th>
                        <th>Date R√©ponse</th>
                        <th>Statut</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for reponse in reponses %}
                        <tr>
                            <td>{{ reponse.ID_Reponse }}</td>
                            <td>{{ reponse.Contenu }}</td>
                            <td>{{ reponse.DateReponse ? reponse.DateReponse|date('Y-m-d H:i:s') : '' }}</td>
                            <td>{{ reponse.Statut }}</td>
                            <td>
                                <a href="{{ path('app_reponse_show', {'id': reponse.ID_Reponse}) }}" class="btn btn-sm btn-primary">üëÅ Voir</a>
                                <a href="{{ path('app_reponse_edit', {'id': reponse.ID_Reponse}) }}" class="btn btn-sm btn-warning">‚úèÔ∏è Modifier</a>
                            </td>
                        </tr>
                    {% else %}
                        <tr><td colspan="5">Aucune r√©ponse trouv√©e.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
 
        </div>

        <script>
            document.getElementById('filterInput').addEventListener('keyup', function () {
                let filter = this.value.toLowerCase();
                let rows = document.querySelectorAll('#reponsesTable tbody tr');
                rows.forEach(row => {
                    let contenu = row.children[1].textContent.toLowerCase();
                    row.style.display = contenu.includes(filter) ? '' : 'none';
                });
            });
        </script>
    </div>
{% endblock %}
